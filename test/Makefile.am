## Process this file with automake to produce Makefile.in
##
## Notes:
##
##   Test files are named similar to "system_under.test.t". The ".t" suffix
##   identifies files that will have a test suite generated by testgen.sh. The
##   ".test" suffix is used to identify the files that will be deleted by
##   "make clean".

SUFFIXES = .tpp
TEST_LOG_DRIVER = env AM_TAP_AWK='$(AWK)' $(SHELL) $(top_srcdir)/build-aux/tap-driver.sh
TESTS = $(check_PROGRAMS)
EXTRA_DIST = $(TESTS)
CLEANFILES = *.test.cpp

.tpp.cpp:
	./testgen.sh $< $@

check_PROGRAMS = element.test document.test parser.test

element_test_SOURCES = sut_test.cpp element.test.cpp $(top_srcdir)/src/element.h
element_test_CXXFLAGS = -I$(top_srcdir)/src
element_test_LDADD = $(top_srcdir)/src/libbypass.a
element_test_LIBS = -libbypass

document_test_SOURCES = sut_test.cpp document.test.cpp $(top_srcdir)/src/document.h
document_test_CXXFLAGS = -I$(top_srcdir)/src
document_test_LDADD = $(top_srcdir)/src/libbypass.a
document_test_LIBS = -libbypass

parser_test_SOURCES = sut_test.cpp parser.test.cpp $(top_srcdir)/src/parser.h
parser_test_CXXFLAGS = -I$(top_srcdir)/src
parser_test_LDADD = $(top_srcdir)/src/libbypass.a $(top_srcdir)/src/soldout/libsoldout.a
parser_test_LIBS = -libbypass -libsoldout
